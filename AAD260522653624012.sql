CREATE TABLE "User" (idUser integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), username varchar(255) NOT NULL UNIQUE, passwordHash varchar(255) NOT NULL UNIQUE, email varchar(255), idRole integer NOT NULL, PRIMARY KEY (idUser));
CREATE TABLE Token (idToken integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), idUser integer NOT NULL, token varchar(512) NOT NULL, expiration timestamp NOT NULL, revoked bit DEFAULT '0' NOT NULL, PRIMARY KEY (idToken));
CREATE TABLE BTCPrice (datetime timestamp NOT NULL, price decimal(38, 8) NOT NULL, PRIMARY KEY (datetime));
CREATE TABLE "Transaction" (idTransaction integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), idUser integer NOT NULL, transactionType varchar(4) DEFAULT 'buy' NOT NULL, units integer DEFAULT 0 NOT NULL, datetime timestamp NOT NULL, PRIMARY KEY (idTransaction));
CREATE TABLE Role (idRole integer GENERATED BY DEFAULT AS IDENTITY (START WITH 1), roleDescription varchar(5) NOT NULL, PRIMARY KEY (idRole));
CREATE UNIQUE INDEX User_idUser ON "User" (idUser);
CREATE UNIQUE INDEX Token_idToken ON Token (idToken);
CREATE UNIQUE INDEX Transaction_idTransaction ON "Transaction" (idTransaction);
CREATE UNIQUE INDEX Role_idRole ON Role (idRole);
ALTER TABLE Token ADD CONSTRAINT FKToken787222 FOREIGN KEY (idUser) REFERENCES "User" (idUser);
ALTER TABLE "Transaction" ADD CONSTRAINT FKTransactio945540 FOREIGN KEY (idUser) REFERENCES "User" (idUser);
ALTER TABLE "Transaction" ADD CONSTRAINT FKTransactio352515 FOREIGN KEY (datetime) REFERENCES BTCPrice (datetime);
ALTER TABLE "User" ADD CONSTRAINT FKUser165467 FOREIGN KEY (idRole) REFERENCES Role (idRole);
